---
import { ChevronRight, Home } from "@lucide/astro";

const { items = [] } = Astro.props;

// Generate breadcrumbs from current path if not provided
const pathname = Astro.url.pathname;
const pathSegments = pathname.split("/").filter(Boolean);

const breadcrumbs =
  items.length > 0
    ? items
    : [
        { label: "Home", href: "/" },
        ...pathSegments.map((segment, index) => {
          const href = "/" + pathSegments.slice(0, index + 1).join("/");
          const label = segment
            .split("-")
            .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
            .join(" ");
          return { label, href };
        }),
      ];
---

{
  breadcrumbs.length > 1 && (
    <nav
      aria-label="Breadcrumb"
      class="py-4 bg-gray-900/50 border-b border-white/10"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <ol class="flex items-center gap-2 text-sm">
          {breadcrumbs.map((item, index) => (
            <li class="flex items-center gap-2">
              {index > 0 && <ChevronRight class="w-4 h-4 text-gray-500" />}
              {index === breadcrumbs.length - 1 ? (
                <span class="text-orange-500 font-medium flex items-center gap-2">
                  {index === 0 && <Home class="w-4 h-4" />}
                  {item.label}
                </span>
              ) : (
                <a
                  href={item.href}
                  class="text-gray-400 hover:text-white transition-colors flex items-center gap-2"
                >
                  {index === 0 && <Home class="w-4 h-4" />}
                  {item.label}
                </a>
              )}
            </li>
          ))}
        </ol>
      </div>
    </nav>
  )
}
