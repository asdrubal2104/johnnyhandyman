---
import { Wrench, Droplet, Zap, Paintbrush, Hammer, Home, Sparkles } from "@lucide/astro";

const services = [
  {
    icon: Hammer,
    title: "Drywall Repair & Installation",
    description: "Expert drywall repair, patching, and installation—from small holes to complete wall replacements.",
    href: "/services/drywall-repair",
    features: ["Hole Patching", "Texture Matching", "Full Installation", "Finishing"]
  },
  {
    icon: Droplet,
    title: "Plumbing Services",
    description: "Reliable plumbing solutions for leaks, installations, and repairs. Fast response and quality work.",
    href: "/services/plumbing-repair",
    features: ["Leak Repair", "Fixture Installation", "Pipe Repair", "Drain Cleaning"]
  },
  {
    icon: Zap,
    title: "Electrical Work",
    description: "Safe, professional electrical work. Fully insured for your peace of mind and currently in the process of official licensing.",
    href: "/services/electrical-fixes",
    features: ["Outlet Installation", "Light Fixtures", "Switch Repair", "Wiring"]
  },
  {
    icon: Paintbrush,
    title: "Painting Services",
    description: "Interior and exterior painting with meticulous attention to detail. Transform your space with fresh colors.",
    href: "/services/painting-services",
    features: ["Interior Painting", "Exterior Painting", "Trim Work", "Color Consultation"]
  },
  {
    icon: Sparkles,
    title: "Professional Cleaning",
    description: "Industrial, commercial, and residential cleaning. Deep cleans, move-outs, and ongoing maintenance.",
    href: "/services/cleaning-services",
    features: ["Industrial Cleaning", "Office Janitorial", "Home Deep Clean", "Post-Construction"]
  },
  {
    icon: Wrench,
    title: "Carpentry & Repairs",
    description: "Custom carpentry and repair. Doors, cabinets, trim, and more—done right.",
    href: "/services/carpentry-repairs",
    features: ["Door Installation", "Cabinet Repair", "Trim & Molding", "Custom Work"]
  },
  {
    icon: Home,
    title: "General Maintenance",
    description: "Complete home maintenance. Keep your property in top condition year-round.",
    href: "/services/home-maintenance",
    features: ["Preventive Care", "Seasonal Prep", "Minor Repairs", "Inspections"]
  }
];
---

<section class="py-20 bg-linear-to-b from-black to-gray-900 services-list-section">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Services Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 services-grid">
      {services.map((service, index) => (
        <article 
          class="group relative bg-linear-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-white/10 rounded-2xl p-8 hover:border-orange-500/50 transition-all duration-300 hover:shadow-2xl hover:shadow-orange-500/10 hover:-translate-y-2"
          data-animate-card
          data-index={index}
        >
          <!-- Icon -->
          <div class="mb-6">
            <div class="w-16 h-16 bg-linear-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center transform group-hover:scale-110 group-hover:rotate-3 transition-all duration-300 shadow-lg shadow-orange-500/20">
              <service.icon class="w-8 h-8 text-white" />
            </div>
          </div>

          <!-- Content -->
          <h3 class="text-2xl font-bold text-white mb-3 font-inter group-hover:text-orange-500 transition-colors">
            {service.title}
          </h3>
          <p class="text-gray-400 mb-6 leading-relaxed">
            {service.description}
          </p>

          <!-- Features List -->
          <ul class="space-y-2 mb-6">
            {service.features.map((feature) => (
              <li class="flex items-center gap-2 text-sm text-gray-300">
                <div class="w-1.5 h-1.5 bg-orange-500 rounded-full"></div>
                {feature}
              </li>
            ))}
          </ul>

          <!-- CTA Link -->
          <a 
            href={service.href}
            class="inline-flex items-center gap-2 text-orange-500 font-semibold hover:gap-4 transition-all group/link"
          >
            Learn More
            <svg class="w-4 h-4 transform group-hover/link:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>

          <!-- Decorative gradient -->
          <div class="absolute inset-0 bg-linear-to-br from-orange-500/0 to-orange-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
        </article>
      ))}
    </div>

    <!-- Bottom CTA -->
    <div class="text-center mt-16" data-animate-cta>
      <p class="text-gray-400 mb-6 text-lg">
        Don't see what you need? I handle a wide variety of repair and maintenance tasks throughout Ogden.
      </p>
      <a 
        href="/contact"
        class="inline-block bg-orange-500 hover:bg-orange-600 text-white px-8 py-4 rounded-xl font-semibold text-lg shadow-lg shadow-orange-500/20 transition-all hover:scale-105 active:scale-95"
      >
        Request Custom Estimate
      </a>
    </div>
  </div>
</section>

<style>
  [data-animate-header],
  [data-animate-card],
  [data-animate-cta] {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    visibility: visible;
  }

  [data-animate-header].reveal-active,
  [data-animate-card].reveal-active,
  [data-animate-cta].reveal-active {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  function setupServicesAnimation() {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            if (entry.target.hasAttribute('data-animate-header') || entry.target.hasAttribute('data-animate-cta')) {
              entry.target.classList.add('reveal-active');
            } else {
              const items = entry.target.querySelectorAll('[data-animate-card]');
              items.forEach((item, i) => {
                setTimeout(() => item.classList.add('reveal-active'), i * 60);
              });
            }
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );

    document.querySelectorAll('.services-list-section').forEach((section) => {
      const header = section.querySelector('[data-animate-header]');
      const grid = section.querySelector('.services-grid');
      const cta = section.querySelector('[data-animate-cta]');

      if (header) observer.observe(header);
      if (grid) observer.observe(grid);
      if (cta) observer.observe(cta);
    });
  }

  setupServicesAnimation();
  document.addEventListener('astro:page-load', setupServicesAnimation);
</script>
